!function(a){a.fn.bindECA=function(b){let c=a.extend({numberOfCells:50,speed:500,ruleNumber:26,classOfStateContainer:"stateContainer",classOfActive:"active",classOfInactive:"inactive",colorOfActive:"#2ca02c",colorOfInactive:"transparent",initialState:null},b),d=a(this),e=null,f=null,g=function(){let a=e.children().last(),b=a.clone();h(a,b),l(b)},h=function(b,d){let e=d.children(),f=b.children(),g=(c.ruleNumber>>>0).toString(2).split("").reverse();e.each(function(b,d){let h=a(d),j=i(h.is(e.first())?f.last():f[b-1])+i(f[b])+i(h.is(e.last())?f.first():f[b+1]);j=parseInt(j,2),Number(g[j])?h.removeClass(c.classOfInactive).addClass(c.classOfActive).css("background-color",c.colorOfActive):h.removeClass(c.classOfActive).addClass(c.classOfInactive).css("background-color",c.colorOfInactive)})},i=function(b){return a(b).hasClass(c.classOfActive)?"1":"0"},j=function(){return a("<div></div>").append(a("<img>").attr("src","https://upload.wikimedia.org/wikipedia/commons/c/ce/Transparent.gif").css("width","100%")).css("flex-grow","1").css("display","inline-block").css("object-fit","contain")},k=function(){let b=a("<div></div>").css("display","flex").css("flex-wrap","nowrap").css("justify-content","space-between").addClass("row");for(let d=0;d<c.numberOfCells;d++)b.append(j());return e.append(b),b},l=function(a){e.append(a)},m=function(b){b.children().each(function(){let b=Math.round(Math.random());a(this).addClass(b?c.classOfActive:c.classOfInactive).css("background-color",b?c.colorOfActive:c.colorOfInactive)})},n=function(b,d){b.children().each(function(b){let e=Number(d[b]);a(this).addClass(e?c.classOfActive:c.classOfInactive).css("background-color",e?c.colorOfActive:c.colorOfInactive)})},o=function(){e=a("<div></div>").addClass(c.classOfStateContainer),d.append(e);let b=k();c.initialState?n(b,c.initialState):m(b)},p=function(){s(),d.find("."+c.classOfStateContainer).remove()},q=function(){p(),o()},r=function(){f||(g(),f=setInterval(function(){g()},c.speed))},s=function(){f&&(clearInterval(f),f=null)},t=function(){q()};return o(),this.on("start.ECA",function(){r()}),this.on("stop.ECA",function(){s()}),this.on("reset.ECA",function(){t()}),this.on("setRule.ECA",function(a){c.ruleNumber=a.rule}),this.on("setColorOfActive.ECA",function(a){c.colorOfActive=a.color}),this.on("setColorOfInactive.ECA",function(a){c.colorOfInactive=a.color}),this.on("setNumberOfCells.ECA",function(a){c.numberOfCells=a.numberOfCells,q()}),this.on("setInitialState.ECA",function(a){c.initialState=a.initialState,q()}),this},a.fn.startECA=function(){return this.trigger("start.ECA"),this},a.fn.stopECA=function(){return this.trigger("stop.ECA"),this},a.fn.resetECA=function(){return this.trigger("reset.ECA"),this},a.fn.setRule=function(a){return this.trigger({type:"setRule.ECA",rule:a}),this},a.fn.setColorOfActive=function(a){return this.trigger({type:"setColorOfActive.ECA",color:a}),this},a.fn.setColorOfInactive=function(a){return this.trigger({type:"setColorOfInactive.ECA",color:a}),this},a.fn.setNumberOfCells=function(a){return this.trigger({type:"setNumberOfCells.ECA",numberOfCells:a}),this},a.fn.setInitialState=function(a){return this.trigger({type:"setInitialState.ECA",initialState:a}),this}}(jQuery);